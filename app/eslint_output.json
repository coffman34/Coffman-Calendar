[{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\AlbumSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\AppCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\CalendarSelector.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentUser.id', 'selected.length', and 'setUserCalendars'. Either include them or remove the dependency array.","line":34,"column":8,"nodeType":"ArrayExpression","endLine":34,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [currentUser.id, selected.length, setUserCalendars, token]","fix":{"range":[1356,1363],"text":"[currentUser.id, selected.length, setUserCalendars, token]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Box, FormControl, InputLabel, Select, MenuItem, Checkbox, ListItemText, CircularProgress, Typography } from '@mui/material';\r\nimport { fetchCalendarList } from '../services/googleCalendar';\r\nimport { useUser } from '../modules/users/useUser';\r\n\r\nconst CalendarSelector = ({ token }) => {\r\n    const { currentUser, getUserCalendars, setUserCalendars } = useUser();\r\n    const [calendars, setCalendars] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const selected = getUserCalendars(currentUser?.id) || [];\r\n\r\n    useEffect(() => {\r\n        if (!token) return;\r\n\r\n        const load = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const list = await fetchCalendarList(token);\r\n                setCalendars(list);\r\n                // If no selection saved, default to primary\r\n                if (selected.length === 0 && list.length > 0) {\r\n                    const primary = list.find(c => c.primary)?.id || list[0].id;\r\n                    setUserCalendars(currentUser.id, [primary]);\r\n                }\r\n            } catch (e) {\r\n                setError(e.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        load();\r\n    }, [token]);\r\n\r\n    const handleChange = (event) => {\r\n        const value = event.target.value;\r\n        const newSelected = typeof value === 'string' ? value.split(',') : value;\r\n        setUserCalendars(currentUser.id, newSelected);\r\n    };\r\n\r\n    if (loading) return <CircularProgress size={20} />;\r\n    if (error) return <Typography color=\"error\" variant=\"caption\">{error}</Typography>;\r\n    if (calendars.length === 0) return null;\r\n\r\n    return (\r\n        <FormControl fullWidth size=\"small\" sx={{ mt: 2 }}>\r\n            <InputLabel>Calendars to Sync</InputLabel>\r\n            <Select\r\n                multiple\r\n                value={selected}\r\n                onChange={handleChange}\r\n                label=\"Calendars to Sync\"\r\n                renderValue={(sel) => calendars.filter(c => sel.includes(c.id)).map(c => c.name).join(', ')}\r\n            >\r\n                {calendars.map((cal) => (\r\n                    <MenuItem key={cal.id} value={cal.id}>\r\n                        <Checkbox checked={selected.includes(cal.id)} />\r\n                        <Box sx={{ width: 12, height: 12, borderRadius: '50%', bgcolor: cal.color, mr: 1 }} />\r\n                        <ListItemText primary={cal.name} />\r\n                    </MenuItem>\r\n                ))}\r\n            </Select>\r\n        </FormControl>\r\n    );\r\n};\r\n\r\nexport default CalendarSelector;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\ChoresPanel.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable 'useEffect'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Box, Typography, Checkbox, Paper, Chip } from '@mui/material';\r\nimport { format } from 'date-fns';\r\n\r\n// Demo chores - daily reset\r\nconst DAILY_CHORES = [\r\n    { id: 1, name: 'Make bed', emoji: '≡ƒ¢Å∩╕Å' },\r\n    { id: 2, name: 'Brush teeth', emoji: '≡ƒ¬Ñ' },\r\n    { id: 3, name: 'Clean room', emoji: '≡ƒº╣' },\r\n    { id: 4, name: 'Do homework', emoji: '≡ƒôÜ' },\r\n    { id: 5, name: 'Feed pets', emoji: '≡ƒÉò' },\r\n];\r\n\r\nconst ChoresPanel = () => {\r\n    const today = format(new Date(), 'yyyy-MM-dd');\r\n    const [completedChores, setCompletedChores] = useState({});\r\n    const [lastResetDate, setLastResetDate] = useState(today);\r\n\r\n    // Reset chores daily - Adjust state when day changes\r\n    if (lastResetDate !== today) {\r\n        setCompletedChores({});\r\n        setLastResetDate(today);\r\n    }\r\n\r\n    const toggleChore = (id) => {\r\n        setCompletedChores(prev => ({ ...prev, [id]: !prev[id] }));\r\n    };\r\n\r\n    const isOverdue = (choreId) => {\r\n        const now = new Date();\r\n        return now.getHours() >= 20 && !completedChores[choreId]; // After 8pm\r\n    };\r\n\r\n    return (\r\n        <Box sx={{ p: 2, height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n            <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\r\n                Daily Chores\r\n            </Typography>\r\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n                {format(new Date(), 'EEEE, MMM d')}\r\n            </Typography>\r\n\r\n            <Box sx={{ flex: 1, overflowY: 'auto' }}>\r\n                {DAILY_CHORES.map(chore => (\r\n                    <ChoreItem\r\n                        key={chore.id}\r\n                        chore={chore}\r\n                        completed={!!completedChores[chore.id]}\r\n                        overdue={isOverdue(chore.id)}\r\n                        onToggle={() => toggleChore(chore.id)}\r\n                    />\r\n                ))}\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst ChoreItem = ({ chore, completed, overdue, onToggle }) => (\r\n    <Paper\r\n        elevation={0}\r\n        onClick={onToggle}\r\n        sx={{\r\n            p: 1.5, mb: 1, display: 'flex', alignItems: 'center', gap: 1,\r\n            bgcolor: completed ? 'rgba(76,175,80,0.1)' : overdue ? 'rgba(244,67,54,0.1)' : 'white',\r\n            border: overdue ? '2px solid #f44336' : '1px solid #eee',\r\n            borderRadius: 2, cursor: 'pointer',\r\n            '&:active': { transform: 'scale(0.98)' },\r\n        }}\r\n    >\r\n        <Checkbox checked={completed} sx={{ p: 0.5 }} />\r\n        <Typography sx={{ fontSize: '1.5rem' }}>{chore.emoji}</Typography>\r\n        <Typography sx={{ flex: 1, textDecoration: completed ? 'line-through' : 'none', opacity: completed ? 0.6 : 1 }}>\r\n            {chore.name}\r\n        </Typography>\r\n        {overdue && <Chip label=\"OVERDUE\" size=\"small\" color=\"error\" />}\r\n    </Paper>\r\n);\r\n\r\nexport default ChoresPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\CollageFrame.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\CollageFrameManager.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\GlobalSnackbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\GoogleConnectButton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\InfoBar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\MainLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\PinContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\PinContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\PinDialog.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[188,195],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Box, Typography, Button, IconButton, Paper } from '@mui/material';\r\nimport BackspaceIcon from '@mui/icons-material/Backspace';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst PinDialog = ({ onSuccess, title = 'Enter PIN' }) => {\r\n    const [pin, setPin] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    const handleDigit = (digit) => {\r\n        if (pin.length < 4) {\r\n            const newPin = pin + digit;\r\n            setPin(newPin);\r\n            setError(false);\r\n        }\r\n    };\r\n\r\n    const handleBackspace = () => {\r\n        setPin(prev => prev.slice(0, -1));\r\n        setError(false);\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        if (pin.length === 4) {\r\n            const success = onSuccess(pin);\r\n            if (!success) {\r\n                setError(true);\r\n                setPin('');\r\n            }\r\n        }\r\n    };\r\n\r\n    const digits = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '', '0', 'back'];\r\n\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" height=\"100%\" p={4}>\r\n            <motion.div animate={error ? { x: [-20, 20, -10, 10, 0] } : {}} transition={{ duration: 0.4 }}>\r\n                <Paper elevation={4} sx={{ p: 4, borderRadius: 4, minWidth: 300, textAlign: 'center' }}>\r\n                    <Typography variant=\"h5\" mb={3} fontWeight=\"bold\">{title}</Typography>\r\n\r\n                    <Box display=\"flex\" justifyContent=\"center\" gap={1.5} mb={3}>\r\n                        {[0, 1, 2, 3].map(i => (\r\n                            <Box key={i} sx={{ width: 20, height: 20, borderRadius: '50%', bgcolor: pin.length > i ? (error ? 'error.main' : 'primary.main') : 'grey.300', transition: 'all 0.2s' }} />\r\n                        ))}\r\n                    </Box>\r\n\r\n                    <AnimatePresence>\r\n                        {error && <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>\r\n                            <Typography color=\"error\" variant=\"body2\" mb={2}>Incorrect PIN</Typography>\r\n                        </motion.div>}\r\n                    </AnimatePresence>\r\n\r\n                    <Box display=\"grid\" gridTemplateColumns=\"repeat(3, 1fr)\" gap={1.5} maxWidth={240} mx=\"auto\">\r\n                        {digits.map((d, idx) => d === '' ? <Box key={idx} /> : d === 'back' ? (\r\n                            <IconButton key={idx} onClick={handleBackspace} sx={{ width: 64, height: 64 }}>\r\n                                <BackspaceIcon />\r\n                            </IconButton>\r\n                        ) : (\r\n                            <Button key={idx} variant=\"outlined\" onClick={() => handleDigit(d)} sx={{ width: 64, height: 64, fontSize: '1.5rem', borderRadius: 2 }}>\r\n                                {d}\r\n                            </Button>\r\n                        ))}\r\n                    </Box>\r\n\r\n                    <Button variant=\"contained\" fullWidth size=\"large\" onClick={handleSubmit} disabled={pin.length !== 4} sx={{ mt: 3, py: 1.5, borderRadius: 2 }}>\r\n                        Unlock\r\n                    </Button>\r\n                </Paper>\r\n            </motion.div>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default PinDialog;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\RightSidebar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\Screensaver.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\WeatherWidget.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\cards\\CardSettingsPopover.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"useEffect"},"fix":{"range":[24,35],"text":""},"desc":"Remove unused variable 'useEffect'."}]},{"ruleId":"no-undef","severity":2,"message":"'setVariant' is not defined.","line":19,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":19,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'setTitle' is not defined.","line":20,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":20,"endColumn":17},{"ruleId":"no-undef","severity":2,"message":"'variant' is not defined.","line":24,"column":18,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":25},{"ruleId":"no-undef","severity":2,"message":"'title' is not defined.","line":24,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":24,"endColumn":32},{"ruleId":"no-undef","severity":2,"message":"'variant' is not defined.","line":39,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":39,"endColumn":35},{"ruleId":"no-undef","severity":2,"message":"'setVariant' is not defined.","line":41,"column":46,"nodeType":"Identifier","messageId":"undef","endLine":41,"endColumn":56},{"ruleId":"no-undef","severity":2,"message":"'variant' is not defined.","line":51,"column":41,"nodeType":"Identifier","messageId":"undef","endLine":51,"endColumn":48},{"ruleId":"no-undef","severity":2,"message":"'title' is not defined.","line":64,"column":28,"nodeType":"Identifier","messageId":"undef","endLine":64,"endColumn":33},{"ruleId":"no-undef","severity":2,"message":"'setTitle' is not defined.","line":65,"column":38,"nodeType":"Identifier","messageId":"undef","endLine":65,"endColumn":46}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Popover, Box, Typography, ToggleButtonGroup, ToggleButton, TextField, Button } from '@mui/material';\r\n\r\nconst variantOptions = [\r\n    { value: 'blue-purple', label: 'Blue-Purple', bg: 'linear-gradient(135deg, #60A5FA 0%, #8B5CF6 100%)' },\r\n    { value: 'teal-green', label: 'Teal-Green', bg: 'linear-gradient(135deg, #34D399 0%, #059669 100%)' },\r\n    { value: 'white', label: 'White', bg: '#FFFFFF' },\r\n];\r\n\r\nconst CardSettingsPopover = ({ anchorEl, onClose, currentVariant, currentTitle, onSave }) => {\r\n    // Track previous props to detect changes during render\r\n    const [prevProps, setPrevProps] = useState({ currentVariant, currentTitle, anchorEl });\r\n\r\n    // Adjust state during render if props change\r\n    if (prevProps.currentVariant !== currentVariant ||\r\n        prevProps.currentTitle !== currentTitle ||\r\n        prevProps.anchorEl !== anchorEl) {\r\n        setPrevProps({ currentVariant, currentTitle, anchorEl });\r\n        setVariant(currentVariant);\r\n        setTitle(currentTitle || '');\r\n    }\r\n\r\n    const handleSave = () => {\r\n        onSave({ variant, title });\r\n    };\r\n\r\n    return (\r\n        <Popover\r\n            open={Boolean(anchorEl)}\r\n            anchorEl={anchorEl}\r\n            onClose={onClose}\r\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        >\r\n            <Box sx={{ p: 2, width: 260 }}>\r\n                <Typography variant=\"subtitle2\" sx={{ mb: 1.5 }}>Card Style</Typography>\r\n\r\n                <ToggleButtonGroup\r\n                    value={variant}\r\n                    exclusive\r\n                    onChange={(e, v) => v && setVariant(v)}\r\n                    sx={{ mb: 2, display: 'flex', gap: 1 }}\r\n                >\r\n                    {variantOptions.map((opt) => (\r\n                        <ToggleButton\r\n                            key={opt.value}\r\n                            value={opt.value}\r\n                            sx={{\r\n                                flex: 1,\r\n                                background: opt.bg,\r\n                                border: variant === opt.value ? '2px solid #8B5CF6' : '1px solid #E5E7EB',\r\n                                '&.Mui-selected': { background: opt.bg },\r\n                            }}\r\n                        >\r\n                            <Box sx={{ width: 20, height: 20 }} />\r\n                        </ToggleButton>\r\n                    ))}\r\n                </ToggleButtonGroup>\r\n\r\n                <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    label=\"Title\"\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    sx={{ mb: 2 }}\r\n                />\r\n\r\n                <Button fullWidth variant=\"contained\" onClick={handleSave}>\r\n                    Save\r\n                </Button>\r\n            </Box>\r\n        </Popover>\r\n    );\r\n};\r\n\r\nexport default CardSettingsPopover;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\cards\\GradientCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\cards\\ProgressBar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\cards\\gradientStyles.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\layout\\DraggableGrid.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\navigation\\NavItem.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\components\\usePin.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\config\\navigation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\hooks\\useClock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\hooks\\useIdleTimer.js","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  68 |\n  69 |         // Start initial timer\n> 70 |         resetTimer();\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  71 |\n  72 |         // Cleanup: remove listeners and clear timer\n  73 |         return () => {","line":70,"column":9,"nodeType":null,"endLine":70,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @fileoverview Custom hook for idle timer (screensaver activation)\r\n * @module hooks/useIdleTimer\r\n * \r\n * EDUCATIONAL NOTES FOR JUNIOR DEVELOPERS:\r\n * \r\n * WHY THIS FILE EXISTS:\r\n * The kiosk should show a screensaver after inactivity.\r\n * This hook tracks user activity and triggers idle state.\r\n * \r\n * DESIGN PATTERN: Custom Hook Pattern\r\n * Encapsulates stateful logic for reuse across components.\r\n */\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\n/**\r\n * Hook for tracking user idle time\r\n * \r\n * WHAT IT DOES:\r\n * Detects when the user hasn't interacted for a specified time.\r\n * \r\n * HOW IT WORKS:\r\n * 1. Listen for user activity (mouse, keyboard, touch)\r\n * 2. Reset timer on each activity\r\n * 3. If timer expires, set idle state to true\r\n * 4. Provide manual control (setIdle function)\r\n * \r\n * @param {number} timeout - Milliseconds of inactivity before idle\r\n * @returns {Object} { isIdle, setIdle }\r\n */\r\nconst useIdleTimer = (timeout = 30000) => {\r\n    const [isIdle, setIsIdle] = useState(false);\r\n    const timerRef = useRef(null);\r\n\r\n    /**\r\n     * Resets the idle timer\r\n     * \r\n     * JUNIOR DEV NOTE: We use useCallback so this function can be safely \r\n     * used as a dependency in useEffect.\r\n     */\r\n    const resetTimer = useCallback(() => {\r\n        // Clear existing timer\r\n        if (timerRef.current) {\r\n            clearTimeout(timerRef.current);\r\n        }\r\n\r\n        // Only update state if needed to avoid \"cascading renders\"\r\n        setIsIdle(prev => {\r\n            if (prev === false) return prev;\r\n            return false;\r\n        });\r\n\r\n        // Start new timer\r\n        timerRef.current = setTimeout(() => {\r\n            setIsIdle(true);\r\n        }, timeout);\r\n    }, [timeout]);\r\n\r\n    useEffect(() => {\r\n        // Events that indicate user activity\r\n        const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];\r\n\r\n        // Add listeners for all activity events\r\n        events.forEach(event => {\r\n            window.addEventListener(event, resetTimer);\r\n        });\r\n\r\n        // Start initial timer\r\n        resetTimer();\r\n\r\n        // Cleanup: remove listeners and clear timer\r\n        return () => {\r\n            events.forEach(event => {\r\n                window.removeEventListener(event, resetTimer);\r\n            });\r\n            if (timerRef.current) {\r\n                clearTimeout(timerRef.current);\r\n            }\r\n        };\r\n    }, [resetTimer]);\r\n\r\n    return {\r\n        isIdle,\r\n        setIdle: setIsIdle,\r\n    };\r\n};\r\n\r\nexport default useIdleTimer;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\hooks\\useMediaSlideshow.js","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  55 |     if (isActive && !hasShuffled && media.length > 0) {\n  56 |         setHasShuffled(true);\n> 57 |         setCurrentIndex(Math.floor(Math.random() * media.length));\n     |                                    ^^^^^^^^^^^^^ Cannot call impure function\n  58 |     } else if (!isActive && hasShuffled) {\n  59 |         setHasShuffled(false);\n  60 |     }","line":57,"column":36,"nodeType":null,"endLine":57,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'currentItem'. Either include it or remove the dependency array.","line":69,"column":8,"nodeType":"ArrayExpression","endLine":69,"endColumn":72,"suggestions":[{"desc":"Update the dependencies array to be: [currentItem.id, currentItem.url, currentItem.type, isActive, currentItem]","fix":{"range":[2300,2364],"text":"[currentItem.id, currentItem.url, currentItem.type, isActive, currentItem]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @fileoverview Custom hook for media slideshow logic\r\n * @module hooks/useMediaSlideshow\r\n * \r\n * EDUCATIONAL NOTES FOR JUNIOR DEVELOPERS:\r\n * \r\n * WHY THIS FILE EXISTS:\r\n * The screensaver needs to cycle through photos and videos.\r\n * This hook encapsulates all the slideshow logic.\r\n * \r\n * DESIGN PATTERN: Custom Hook Pattern\r\n * Extracts stateful slideshow logic for reuse and testing.\r\n */\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\n/**\r\n * Configuration constants\r\n */\r\nconst PHOTO_DURATION = 10000; // 10 seconds\r\nconst VIDEO_MAX_DURATION = 60000; // 60 seconds\r\n\r\n/**\r\n * Hook for managing media slideshow\r\n * \r\n * @param {Array} media - Array of media items { type, url, thumbnail }\r\n * @param {boolean} isActive - Whether slideshow is active\r\n * @returns {Object} { currentItem, currentIndex, goToNext, videoRef }\r\n */\r\nexport const useMediaSlideshow = (media, isActive) => {\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [videoUrl, setVideoUrl] = useState(null);\r\n    const videoRef = useRef(null);\r\n    const timerRef = useRef(null);\r\n\r\n    // Track if we've already shuffled on activation to avoid cascading renders\r\n    const [hasShuffled, setHasShuffled] = useState(false);\r\n\r\n    /**\r\n     * Advances to next media item\r\n     * \r\n     * JUNIOR DEV NOTE: We use useCallback so this is stable for useEffect dependencies.\r\n     */\r\n    const goToNext = useCallback(() => {\r\n        if (!media.length) return;\r\n        setCurrentIndex(prev => (prev + 1) % media.length);\r\n        setVideoUrl(null);\r\n    }, [media.length]);\r\n\r\n    const currentItem = media[currentIndex];\r\n\r\n    /**\r\n     * Shuffle media on activation (Adjusting state during render pattern)\r\n     */\r\n    if (isActive && !hasShuffled && media.length > 0) {\r\n        setHasShuffled(true);\r\n        setCurrentIndex(Math.floor(Math.random() * media.length));\r\n    } else if (!isActive && hasShuffled) {\r\n        setHasShuffled(false);\r\n    }\r\n\r\n    /** Load video URL when needed */\r\n    useEffect(() => {\r\n        if (!currentItem || currentItem.type !== 'video' || !isActive) {\r\n            setVideoUrl(prev => prev === null ? prev : null);\r\n            return;\r\n        }\r\n        setVideoUrl(prev => prev === currentItem.url ? prev : currentItem.url);\r\n    }, [currentItem?.id, currentItem?.url, currentItem?.type, isActive]);\r\n\r\n    /** Auto-advance slideshow */\r\n    useEffect(() => {\r\n        if (!isActive || media.length === 0) return;\r\n\r\n        const duration = currentItem?.type === 'video'\r\n            ? VIDEO_MAX_DURATION\r\n            : PHOTO_DURATION;\r\n\r\n        timerRef.current = setTimeout(goToNext, duration);\r\n\r\n        return () => {\r\n            if (timerRef.current) clearTimeout(timerRef.current);\r\n        };\r\n    }, [isActive, media.length, currentIndex, currentItem?.type, goToNext]);\r\n\r\n    /** Handle video end event */\r\n    const handleVideoEnded = useCallback(() => {\r\n        if (timerRef.current) clearTimeout(timerRef.current);\r\n        goToNext();\r\n    }, [goToNext]);\r\n\r\n    return {\r\n        currentItem,\r\n        currentIndex,\r\n        videoUrl,\r\n        goToNext,\r\n        handleVideoEnded,\r\n        videoRef,\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\AddEventDialog.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\CalendarContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\CalendarContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\CalendarView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\DayColumn.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\DayView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\EventCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\EventDetailPopup.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\MealSection.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\MonthView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\ScheduleView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\WeeklyView.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'useMemo' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"useMemo"},"fix":{"range":[12,25],"text":""},"desc":"Remove unused variable 'useMemo'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'useMuiTheme' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":2,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":72,"suggestions":[{"messageId":"removeVar","data":{"varName":"useMuiTheme"},"fix":{"range":[87,112],"text":""},"desc":"Remove unused variable 'useMuiTheme'."}]},{"ruleId":"no-undef","severity":2,"message":"'addWeeks' is not defined.","line":10,"column":27,"nodeType":"Identifier","messageId":"undef","endLine":10,"endColumn":35}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\r\nimport { Box, Typography, Paper, Grid2 as Grid, useTheme as useMuiTheme } from '@mui/material';\r\nimport { format, startOfWeek, addDays, isSameDay } from 'date-fns';\r\nimport DayColumn from './DayColumn';\r\nimport AddEventDialog from './AddEventDialog';\r\n\r\nconst WeeklyView = ({ currentDate = new Date(), events = [], onAddEvent, onEditEvent }) => {\r\n    const weekStart = startOfWeek(currentDate);\r\n    const days = Array.from({ length: 7 }, (_, i) => addDays(weekStart, i));\r\n    const nextWeekStart = addWeeks(weekStart, 1);\r\n    const nextWeekDays = Array.from({ length: 7 }, (_, i) => addDays(nextWeekStart, i));\r\n\r\n    const allEvents = events;\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex', height: '100%', overflow: 'hidden', position: 'relative' }}>\r\n            {days.map(day => (\r\n                <DayColumn\r\n                    key={day.toString()}\r\n                    day={day}\r\n                    events={allEvents}\r\n                    onAddEvent={onAddEvent}\r\n                    onEditEvent={onEditEvent}\r\n                />\r\n            ))}\r\n            <Paper elevation={3} sx={{\r\n                minWidth: 160,\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                bgcolor: '#fafafa',\r\n                borderRadius: 2,\r\n                ml: 1,\r\n                boxShadow: '0 4px 16px rgba(0,0,0,0.1)',\r\n                overflow: 'hidden'\r\n            }}>\r\n                <Box sx={{ p: 1, textAlign: 'center', borderBottom: '1px solid #eee', bgcolor: '#fff' }}>\r\n                    <Typography variant=\"subtitle2\" fontWeight=\"bold\">Next Week</Typography>\r\n                    <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {format(nextWeekStart, 'MMM d')} - {format(addDays(nextWeekStart, 6), 'd')}\r\n                    </Typography>\r\n                </Box>\r\n                <Box sx={{ flex: 1, overflowY: 'auto', p: 1 }}>\r\n                    {nextWeekDays.map(day => {\r\n                        const dayEvents = allEvents.filter(e => isSameDay(e.date, day));\r\n                        if (dayEvents.length === 0) return null;\r\n                        return (\r\n                            <Box key={day.toString()} sx={{ mb: 2 }}>\r\n                                <Typography variant=\"caption\" fontWeight=\"bold\" color=\"primary\" sx={{ display: 'block', mb: 0.5, borderBottom: '1px solid #ddd' }}>\r\n                                    {format(day, 'EEE d')}\r\n                                </Typography>\r\n                                {dayEvents.map(event => (\r\n                                    <Box\r\n                                        key={event.id}\r\n                                        onClick={() => onEditEvent?.(event)}\r\n                                        sx={{\r\n                                            p: 1,\r\n                                            mb: 0.5,\r\n                                            borderRadius: 1,\r\n                                            bgcolor: '#fff',\r\n                                            borderLeft: '3px solid',\r\n                                            borderColor: event.colorId ? `#${['a4bdfc', '7ae7bf', 'dbadff', 'ff887c', 'fbd75b'][event.colorId % 5]}` : 'primary.main',\r\n                                            cursor: 'pointer',\r\n                                            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n                                            transition: 'box-shadow 0.2s ease, transform 0.2s ease',\r\n                                            '&:hover': {\r\n                                                bgcolor: '#f5f5f5',\r\n                                                boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n                                                transform: 'translateY(-1px)'\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        <Typography variant=\"caption\" sx={{ fontWeight: 500, display: 'block', lineHeight: 1.2 }}>\r\n                                            {event.emoji} {event.summary}\r\n                                        </Typography>\r\n                                        {event.startTime && (\r\n                                            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ fontSize: '0.7rem' }}>\r\n                                                {event.startTime}\r\n                                            </Typography>\r\n                                        )}\r\n                                    </Box>\r\n                                ))}\r\n                            </Box>\r\n                        );\r\n                    })}\r\n                    {!nextWeekDays.some(day => allEvents.some(e => isSameDay(e.date, day))) && (\r\n                        <Typography variant=\"body2\" color=\"text.disabled\" sx={{ textAlign: 'center', mt: 4 }}>\r\n                            No events scheduled\r\n                        </Typography>\r\n                    )}\r\n                </Box>\r\n            </Paper>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default WeeklyView;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\hooks\\useCalendarEvents.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\hooks\\useCalendarNavigation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\hooks\\useEventMutations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\calendar\\useCalendar.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\chores\\ChoresView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\lists\\ListView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\AddMealDialog.jsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n  29 |\n  30 |     const handleAdd = () => {\n> 31 |         const mealId = Date.now().toString();\n     |                        ^^^^^^^^^^ Cannot call impure function\n  32 |         const meal = tab === 0 && selectedRecipe\n  33 |             ? { ...selectedRecipe, id: mealId }\n  34 |             : { name, instructions };","line":31,"column":24,"nodeType":null,"endLine":31,"endColumn":34}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Dialog, DialogTitle, DialogContent, DialogActions, Button, TextField, Box,\r\n    Tabs, Tab, List, ListItemButton, ListItemText, Switch, FormControlLabel, Chip, Typography\r\n} from '@mui/material';\r\nimport { format } from 'date-fns';\r\nimport { useMealCategories } from './useMealCategories';\r\nimport { useMeals } from './useMeals';\r\n\r\nconst AddMealDialog = ({ open, onClose, initialDate, initialCategory }) => {\r\n    const { categories } = useMealCategories();\r\n    const { recipes, addMeal, saveRecipe } = useMeals();\r\n    const [tab, setTab] = useState(0);\r\n    const [filterCat, setFilterCat] = useState(null);\r\n    const [selectedRecipe, setSelectedRecipe] = useState(null);\r\n    const [name, setName] = useState('');\r\n    const [date, setDate] = useState(initialDate || format(new Date(), 'yyyy-MM-dd'));\r\n    const [categoryId, setCategoryId] = useState(initialCategory || 'dinner');\r\n    const [instructions, setInstructions] = useState('');\r\n    const [saveToRecipes, setSaveToRecipes] = useState(false);\r\n\r\n    // Sync state when dialog opens with new props\r\n    useEffect(() => {\r\n        if (open) {\r\n            setDate(initialDate || format(new Date(), 'yyyy-MM-dd'));\r\n            setCategoryId(initialCategory || 'dinner');\r\n        }\r\n    }, [open, initialDate, initialCategory]);\r\n\r\n    const handleAdd = () => {\r\n        const mealId = Date.now().toString();\r\n        const meal = tab === 0 && selectedRecipe\r\n            ? { ...selectedRecipe, id: mealId }\r\n            : { name, instructions };\r\n        if (!meal.name?.trim()) return;\r\n        addMeal(date, categoryId, meal);\r\n        if (saveToRecipes || (tab === 1 && name.trim())) {\r\n            saveRecipe({ name: meal.name, instructions: meal.instructions, categoryId });\r\n        }\r\n        resetAndClose();\r\n    };\r\n\r\n    const resetAndClose = () => {\r\n        setTab(0); setSelectedRecipe(null); setName(''); setInstructions('');\r\n        setSaveToRecipes(false); setFilterCat(null);\r\n        onClose();\r\n    };\r\n\r\n    const filteredRecipes = filterCat ? recipes.filter(r => r.categoryId === filterCat) : recipes;\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            onClose={resetAndClose}\r\n            fullWidth\r\n            maxWidth=\"sm\"\r\n            PaperProps={{\r\n                sx: {\r\n                    borderRadius: '8px',\r\n                    boxShadow: '0 4px 20px rgba(0,0,0,0.1)',\r\n                    overflow: 'hidden'\r\n                }\r\n            }}\r\n        >\r\n            <Box sx={{\r\n                p: 2.5,\r\n                pb: 1.5,\r\n                borderBottom: '1px solid rgba(0,0,0,0.05)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between'\r\n            }}>\r\n                <Typography variant=\"h6\" fontWeight=\"bold\">Add Meal</Typography>\r\n            </Box>\r\n\r\n            <DialogContent sx={{ p: 3 }}>\r\n                <Tabs\r\n                    value={tab}\r\n                    onChange={(_, v) => setTab(v)}\r\n                    sx={{\r\n                        mb: 3,\r\n                        '& .MuiTabs-indicator': { height: 3, borderRadius: '3px' }\r\n                    }}\r\n                >\r\n                    <Tab label=\"From Recipes\" />\r\n                    <Tab label=\"New Entry\" />\r\n                </Tabs>\r\n\r\n                {tab === 0 ? (\r\n                    <>\r\n                        <Box sx={{ display: 'flex', gap: 0.5, mb: 1, flexWrap: 'wrap' }}>\r\n                            <Chip\r\n                                label=\"All\"\r\n                                onClick={() => setFilterCat(null)}\r\n                                variant={filterCat ? 'outlined' : 'filled'}\r\n                                size=\"small\"\r\n                                sx={{ borderRadius: '6px' }}\r\n                            />\r\n                            {categories.map(c => (\r\n                                <Chip\r\n                                    key={c.id}\r\n                                    label={c.name}\r\n                                    onClick={() => setFilterCat(c.id)}\r\n                                    variant={filterCat === c.id ? 'filled' : 'outlined'}\r\n                                    size=\"small\"\r\n                                    sx={{\r\n                                        borderRadius: '6px',\r\n                                        bgcolor: filterCat === c.id ? c.color : 'transparent',\r\n                                        '&:hover': { bgcolor: filterCat === c.id ? c.color : 'rgba(0,0,0,0.04)' }\r\n                                    }}\r\n                                />\r\n                            ))}\r\n                        </Box>\r\n                        <List sx={{\r\n                            maxHeight: 250,\r\n                            overflow: 'auto',\r\n                            border: '1px solid rgba(0,0,0,0.08)',\r\n                            borderRadius: '8px',\r\n                            mt: 1.5\r\n                        }}>\r\n                            {filteredRecipes.length === 0 && <ListItemText primary=\"No saved recipes\" sx={{ p: 2, textAlign: 'center', opacity: 0.6 }} />}\r\n                            {filteredRecipes.map(r => (\r\n                                <ListItemButton\r\n                                    key={r.id}\r\n                                    selected={selectedRecipe?.id === r.id}\r\n                                    onClick={() => setSelectedRecipe(r)}\r\n                                    sx={{\r\n                                        '&.Mui-selected': {\r\n                                            bgcolor: 'rgba(139, 92, 246, 0.08)',\r\n                                            '&:hover': { bgcolor: 'rgba(139, 92, 246, 0.12)' }\r\n                                        }\r\n                                    }}\r\n                                >\r\n                                    <ListItemText primary={r.name} secondary={r.instructions?.slice(0, 50)} />\r\n                                </ListItemButton>\r\n                            ))}\r\n                        </List>\r\n                    </>\r\n                ) : (\r\n                    <TextField\r\n                        fullWidth\r\n                        label=\"What Are We Eating?\"\r\n                        value={name}\r\n                        onChange={e => setName(e.target.value)}\r\n                        sx={{ mb: 2 }}\r\n                        variant=\"outlined\"\r\n                    />\r\n                )}\r\n                <Box sx={{ display: 'flex', gap: 2, my: 3, flexWrap: 'wrap' }}>\r\n                    <TextField\r\n                        type=\"date\"\r\n                        label=\"Date\"\r\n                        value={date}\r\n                        onChange={e => setDate(e.target.value)}\r\n                        size=\"small\"\r\n                        InputLabelProps={{ shrink: true }}\r\n                        sx={{ flex: 1, minWidth: '150px' }}\r\n                    />\r\n                    <TextField\r\n                        select\r\n                        label=\"Category\"\r\n                        value={categoryId}\r\n                        onChange={e => setCategoryId(e.target.value)}\r\n                        size=\"small\"\r\n                        SelectProps={{ native: true }}\r\n                        sx={{ flex: 1, minWidth: '150px' }}\r\n                    >\r\n                        {categories.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                    </TextField>\r\n                </Box>\r\n                <TextField\r\n                    fullWidth\r\n                    multiline\r\n                    rows={3}\r\n                    label=\"Instructions (optional)\"\r\n                    value={instructions}\r\n                    onChange={e => setInstructions(e.target.value)}\r\n                    sx={{ mb: 2 }}\r\n                />\r\n                <FormControlLabel\r\n                    control={<Switch checked={saveToRecipes} onChange={e => setSaveToRecipes(e.target.checked)} color=\"primary\" />}\r\n                    label=\"Save to Recipes\"\r\n                />\r\n            </DialogContent>\r\n            <DialogActions sx={{ p: 2.5, pt: 1.5, gap: 1 }}>\r\n                <Button\r\n                    onClick={resetAndClose}\r\n                    sx={{ color: 'text.secondary' }}\r\n                >\r\n                    Cancel\r\n                </Button>\r\n                <Button\r\n                    onClick={handleAdd}\r\n                    variant=\"contained\"\r\n                    disableElevation\r\n                    sx={{\r\n                        bgcolor: 'warning.main',\r\n                        px: 4,\r\n                        '&:hover': { bgcolor: 'warning.dark' }\r\n                    }}\r\n                >\r\n                    Add\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default AddMealDialog;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\FilterMenu.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealCategoryContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealCategoryContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealCell.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealPlanGrid.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\MealsView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\RecipeBox.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\RecipeDetailPopup.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\useMealCategories.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\meals\\useMeals.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\photos\\PhotoLightbox.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\photos\\PhotosView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\rewards\\RewardsView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\settings\\ProfileManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\settings\\SettingsView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\sleep\\SleepView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\tasks\\TasksView.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\tasks\\components\\TaskHeader.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\tasks\\components\\TaskInput.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\tasks\\components\\TaskItem.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\tasks\\hooks\\useTasks.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'selectedListId'. Either include it or remove the dependency array.","line":35,"column":8,"nodeType":"ArrayExpression","endLine":35,"endColumn":95,"suggestions":[{"desc":"Update the dependencies array to be: [connected, token, refreshTrigger, currentUser.id, setSelectedListId, updateUserToken, selectedListId]","fix":{"range":[1399,1486],"text":"[connected, token, refreshTrigger, currentUser.id, setSelectedListId, updateUserToken, selectedListId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { fetchTaskLists, fetchTasks, createTask, updateTask, deleteTask } from '../../../services/googleTasks';\r\n\r\nexport const useTasks = (currentUser, getCurrentUserToken, connected, updateUserToken, showNotification) => {\r\n    const [taskLists, setTaskLists] = useState([]);\r\n    const [selectedListId, setSelectedListId] = useState('');\r\n    const [tasks, setTasks] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n\r\n    const token = getCurrentUserToken();\r\n\r\n    useEffect(() => {\r\n        if (!connected || !token) {\r\n            setTaskLists([]);\r\n            setTasks([]);\r\n            return;\r\n        }\r\n        const loadLists = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const lists = await fetchTaskLists(token);\r\n                setTaskLists(lists);\r\n                if (lists.length > 0 && !selectedListId) setSelectedListId(lists[0].id);\r\n            } catch (err) {\r\n                if (err.message === 'TOKEN_EXPIRED') updateUserToken(currentUser.id, null);\r\n                else setError(\"Failed to load task lists.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadLists();\r\n    }, [connected, token, refreshTrigger, currentUser?.id, setSelectedListId, updateUserToken]);\r\n\r\n    useEffect(() => {\r\n        if (!selectedListId || !token) return;\r\n        const loadTasks = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const fetchedTasks = await fetchTasks(token, selectedListId);\r\n                setTasks(fetchedTasks || []);\r\n            } catch (err) {\r\n                if (err.message === 'TOKEN_EXPIRED') updateUserToken(currentUser.id, null);\r\n                else setError(\"Failed to load tasks.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadTasks();\r\n    }, [selectedListId, token, refreshTrigger, currentUser?.id, updateUserToken]);\r\n\r\n    const handleAddTask = async (title) => {\r\n        try {\r\n            const newTask = await createTask(token, selectedListId, { title });\r\n            setTasks(prev => [newTask, ...prev]);\r\n            showNotification('Task added', 'success');\r\n            return true;\r\n        } catch (err) {\r\n            if (err.message === 'TOKEN_EXPIRED') updateUserToken(currentUser.id, null);\r\n            else showNotification('Could not add task', 'error');\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const handleToggleTask = async (task) => {\r\n        const originalStatus = task.status;\r\n        const newStatus = task.status === 'completed' ? 'needsAction' : 'completed';\r\n        setTasks(prev => prev.map(t => t.id === task.id ? { ...t, status: newStatus } : t));\r\n        try {\r\n            await updateTask(token, selectedListId, task.id, { status: newStatus, title: task.title });\r\n            showNotification(newStatus === 'completed' ? 'Task completed' : 'Task reopened', 'info');\r\n        } catch (err) {\r\n            if (err.message === 'TOKEN_EXPIRED') updateUserToken(currentUser.id, null);\r\n            else showNotification('Failed to update task', 'error');\r\n            setTasks(prev => prev.map(t => t.id === task.id ? { ...t, status: originalStatus } : t));\r\n        }\r\n    };\r\n\r\n    const handleDeleteTask = async (taskId) => {\r\n        const previousTasks = [...tasks];\r\n        setTasks(prev => prev.filter(t => t.id !== taskId));\r\n        try {\r\n            await deleteTask(token, selectedListId, taskId);\r\n            showNotification('Task deleted', 'success');\r\n        } catch (err) {\r\n            if (err.message === 'TOKEN_EXPIRED') updateUserToken(currentUser.id, null);\r\n            else showNotification('Failed to delete task', 'error');\r\n            setTasks(previousTasks);\r\n        }\r\n    };\r\n\r\n    return {\r\n        taskLists, selectedListId, setSelectedListId, tasks, loading, error, setError,\r\n        setRefreshTrigger, handleAddTask, handleToggleTask, handleDeleteTask\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\ui\\UIContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\ui\\UIContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\ui\\useUI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\CalendarSyncPanel.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'selectedIds.length', 'setUserCalendars', and 'user.id'. Either include them or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":15,"suggestions":[{"desc":"Update the dependencies array to be: [selectedIds.length, setUserCalendars, token, user.id]","fix":{"range":[1604,1611],"text":"[selectedIds.length, setUserCalendars, token, user.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Paper, Typography, Box, Checkbox, FormControlLabel, CircularProgress, Alert } from '@mui/material';\r\nimport GoogleConnectButton from '../../components/GoogleConnectButton';\r\nimport { useUser } from './useUser';\r\nimport { fetchCalendarList } from '../../services/googleCalendar';\r\n\r\nconst CalendarSyncPanel = ({ user }) => {\r\n    const { isUserConnected, googleTokens, getUserCalendars, setUserCalendars } = useUser();\r\n    const connected = isUserConnected(user.id);\r\n    const token = googleTokens[user.id];\r\n\r\n    const [calendars, setCalendars] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const selectedIds = getUserCalendars(user.id);\r\n\r\n    useEffect(() => {\r\n        if (!token) { setCalendars([]); return; }\r\n\r\n        const loadCalendars = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const list = await fetchCalendarList(token);\r\n                setCalendars(list);\r\n                // Auto-select primary calendar if none selected\r\n                if (selectedIds.length === 0) {\r\n                    const primary = list.find(c => c.primary);\r\n                    if (primary) setUserCalendars(user.id, [primary.id]);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Calendar fetch error:\", err);\r\n                setError(err.message || 'Failed to load calendars');\r\n            } finally { setLoading(false); }\r\n        };\r\n        loadCalendars();\r\n    }, [token]);\r\n\r\n    const toggleCalendar = (calId) => {\r\n        const newSelected = selectedIds.includes(calId)\r\n            ? selectedIds.filter(id => id !== calId)\r\n            : [...selectedIds, calId];\r\n        setUserCalendars(user.id, newSelected);\r\n    };\r\n\r\n    return (\r\n        <Paper sx={{ p: 3 }}>\r\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n                <Typography variant=\"h6\">Google Calendar Sync</Typography>\r\n                <GoogleConnectButton userId={user.id} compact />\r\n            </Box>\r\n\r\n            {!connected && <Typography color=\"text.secondary\">Connect Google to sync calendars</Typography>}\r\n            {loading && <CircularProgress size={24} />}\r\n            {error && <Alert severity=\"error\" sx={{ mt: 1 }}>{error}</Alert>}\r\n\r\n            {connected && calendars.length > 0 && (\r\n                <Box>\r\n                    <Typography variant=\"subtitle2\" color=\"text.secondary\" mb={1}>Select calendars to sync:</Typography>\r\n                    {calendars.map(cal => (\r\n                        <FormControlLabel\r\n                            key={cal.id}\r\n                            control={<Checkbox checked={selectedIds.includes(cal.id)} onChange={() => toggleCalendar(cal.id)} />}\r\n                            label={<Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n                                <Box sx={{ width: 12, height: 12, bgcolor: cal.color, borderRadius: '50%' }} />\r\n                                {cal.name}\r\n                            </Box>}\r\n                        />\r\n                    ))}\r\n                </Box>\r\n            )}\r\n        </Paper>\r\n    );\r\n};\r\n\r\nexport default CalendarSyncPanel;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\UserContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\UserContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\UserManagement.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\UserProfileCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\UserSelector.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\GoogleAuthContext.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  111 |                 expiresAt: result.expiresAt,\n  112 |             });\n> 113 |             updateUserToken(result.userId, tokenJson);\n      |             ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  114 |         }\n  115 |     }, [updateUserToken]);\n  116 |","line":113,"column":13,"nodeType":null,"endLine":113,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @fileoverview Google Auth Context Provider\r\n * \r\n * JUNIOR DEV NOTE: This provider manages Google OAuth tokens and \r\n * related data (calendars/photos) for all family members.\r\n * \r\n * WHY USE THIS?\r\n * It centralizes all Google API authentication logic in one place.\r\n * It handles the OAuth callback, token storage, and expiration checks.\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { handleAuthCallback } from '../../../services/googleAuth';\r\nimport {\r\n    getAllGoogleTokens,\r\n    setGoogleToken,\r\n    removeGoogleToken,\r\n    getCalendarsFromStorage,\r\n    setCalendarsInStorage,\r\n    getPhotosFromStorage,\r\n    setPhotosInStorage\r\n} from '../../../utils/storage';\r\nimport { GoogleAuthContext } from './GoogleAuthContextCore';\r\n\r\n/**\r\n * GoogleAuthProvider Component\r\n * \r\n * @param {Object} props\r\n * @param {React.ReactNode} props.children\r\n */\r\nexport function GoogleAuthProvider({ children }) {\r\n    // 1. Initial State from Storage\r\n    const [googleTokens, setGoogleTokens] = useState(() => getAllGoogleTokens());\r\n    const [selectedCalendars, setSelectedCalendars] = useState(() => getCalendarsFromStorage());\r\n    const [userPhotos, setUserPhotosState] = useState(() => getPhotosFromStorage());\r\n\r\n    // 2. Token Operations\r\n\r\n    /** \r\n     * Updates a user token in state and storage\r\n     * JUNIOR DEV NOTE: We use useCallback because this is passed to components.\r\n     */\r\n    const updateUserToken = useCallback((userId, tokenData) => {\r\n        if (tokenData) {\r\n            setGoogleTokens(prev => ({ ...prev, [userId]: tokenData }));\r\n            setGoogleToken(userId, tokenData);\r\n        } else {\r\n            setGoogleTokens(prev => {\r\n                const newTokens = { ...prev };\r\n                delete newTokens[userId];\r\n                return newTokens;\r\n            });\r\n            removeGoogleToken(userId);\r\n        }\r\n    }, []);\r\n\r\n    /** \r\n     * Gets a valid token for a user\r\n     * JUNIOR DEV NOTE: We use a function here instead of a derived state\r\n     * because token validity changes with time.\r\n     */\r\n    const getUserToken = useCallback((userId) => {\r\n        const tokenData = googleTokens[userId];\r\n        if (!tokenData) return null;\r\n\r\n        try {\r\n            const parsed = JSON.parse(tokenData);\r\n            // IMPURE CHECK FIX: We check validity at the time of call.\r\n            // Avoid calling Date.now() in the render phase.\r\n            if (Date.now() > parsed.expiresAt) {\r\n                updateUserToken(userId, null);\r\n                return null;\r\n            }\r\n            return parsed.accessToken;\r\n        } catch (error) {\r\n            console.error('Failed to parse token:', error);\r\n            return null;\r\n        }\r\n    }, [googleTokens, updateUserToken]);\r\n\r\n    /** Checks if a user has a connected account */\r\n    const isUserConnected = useCallback((userId) => {\r\n        return getUserToken(userId) !== null;\r\n    }, [getUserToken]);\r\n\r\n    // 3. Data Operations\r\n\r\n    const getUserCalendars = useCallback((userId) => selectedCalendars[userId] || [], [selectedCalendars]);\r\n\r\n    const setUserCalendars = useCallback((userId, calendars) => {\r\n        setSelectedCalendars(prev => ({ ...prev, [userId]: calendars }));\r\n    }, []);\r\n\r\n    const getUserPhotos = useCallback((userId) => userPhotos[userId] || [], [userPhotos]);\r\n\r\n    const setUserPhotos = useCallback((userId, photos) => {\r\n        const taggedPhotos = photos.map(photo => ({ ...photo, ownerId: userId }));\r\n        setUserPhotosState(prev => ({ ...prev, [userId]: taggedPhotos }));\r\n    }, []);\r\n\r\n    const getAllPhotos = useCallback(() => Object.values(userPhotos).flat(), [userPhotos]);\r\n\r\n    // 4. Effects\r\n\r\n    /** Handle OAuth redirect callback on app load */\r\n    useEffect(() => {\r\n        const result = handleAuthCallback();\r\n        if (result) {\r\n            const tokenJson = JSON.stringify({\r\n                accessToken: result.accessToken,\r\n                expiresAt: result.expiresAt,\r\n            });\r\n            updateUserToken(result.userId, tokenJson);\r\n        }\r\n    }, [updateUserToken]);\r\n\r\n    /** Auto-persist data changes */\r\n    useEffect(() => { setCalendarsInStorage(selectedCalendars); }, [selectedCalendars]);\r\n    useEffect(() => { setPhotosInStorage(userPhotos); }, [userPhotos]);\r\n\r\n    // 5. Context Value\r\n    const value = {\r\n        googleTokens,\r\n        getUserToken,\r\n        isUserConnected,\r\n        updateUserToken,\r\n        selectedCalendars,\r\n        getUserCalendars,\r\n        setUserCalendars,\r\n        userPhotos,\r\n        getUserPhotos,\r\n        setUserPhotos,\r\n        getAllPhotos,\r\n    };\r\n\r\n    return (\r\n        <GoogleAuthContext.Provider value={value}>\r\n            {children}\r\n        </GoogleAuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport default GoogleAuthProvider;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\GoogleAuthContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\SyncContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\SyncContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\UserProfileContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\UserProfileContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\useGoogleAuth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\useSync.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\contexts\\useUserProfile.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\modules\\users\\useUser.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\providers\\AppProviders.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\routing\\ModuleRouter.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":19,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[584,592],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @fileoverview Module routing configuration and component\r\n * @module routing/ModuleRouter\r\n * \r\n * EDUCATIONAL NOTES FOR JUNIOR DEVELOPERS:\r\n * \r\n * WHY THIS FILE EXISTS:\r\n * The app has multiple \"modules\" (Calendar, Tasks, Meals, etc.).\r\n * This file handles:\r\n * - Defining which modules exist\r\n * - Routing to the correct module\r\n * - Animating transitions between modules\r\n * \r\n * DESIGN PATTERN: Router Pattern + Configuration\r\n * We separate routing logic from the main App component.\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport CalendarView from '../modules/calendar/CalendarView';\r\nimport TasksView from '../modules/tasks/TasksView';\r\nimport RewardsView from '../modules/rewards/RewardsView';\r\nimport MealsView from '../modules/meals/MealsView';\r\nimport PhotosView from '../modules/photos/PhotosView';\r\nimport ListView from '../modules/lists/ListView';\r\nimport SleepView from '../modules/sleep/SleepView';\r\nimport SettingsView from '../modules/settings/SettingsView';\r\nimport MainLayout from '../components/MainLayout';\r\nimport GlobalSnackbar from '../components/GlobalSnackbar';\r\n\r\n/**\r\n * Module configuration\r\n * \r\n * WHAT IT DOES:\r\n * Defines all available modules and their components.\r\n * \r\n * WHY A CONFIGURATION OBJECT?\r\n * - Easy to add new modules (just add to this object)\r\n * - Type-safe (can see all modules at a glance)\r\n * - Testable (can verify all modules are defined)\r\n * \r\n * JUNIOR DEV NOTE: Why not use React Router?\r\n * This is a kiosk app with simple navigation. React Router would be\r\n * overkill. This simple object-based routing is easier to understand.\r\n */\r\nconst MODULES = {\r\n    calendar: CalendarView,\r\n    tasks: TasksView,\r\n    rewards: RewardsView,\r\n    meals: MealsView,\r\n    photos: PhotosView,\r\n    lists: ListView,\r\n    sleep: SleepView,\r\n    settings: SettingsView,\r\n};\r\n\r\n/**\r\n * Animation configuration for module transitions\r\n * \r\n * JUNIOR DEV NOTE: What are these values?\r\n * - initial: Starting state (invisible, shifted right)\r\n * - animate: End state (visible, centered)\r\n * - exit: Leaving state (invisible, shifted left)\r\n * - duration: How long the animation takes (0.3 seconds)\r\n */\r\nconst TRANSITION_CONFIG = {\r\n    initial: { opacity: 0, x: 20 },\r\n    animate: { opacity: 1, x: 0 },\r\n    exit: { opacity: 0, x: -20 },\r\n    transition: { duration: 0.3 },\r\n};\r\n\r\n/**\r\n * Module Router Component\r\n * \r\n * WHAT IT DOES:\r\n * Handles navigation between app modules with animations.\r\n * \r\n * HOW IT WORKS:\r\n * 1. Track current module in state\r\n * 2. Render the corresponding component\r\n * 3. Animate transitions with Framer Motion\r\n * 4. Handle escape key to close app (kiosk mode)\r\n * \r\n * @returns {React.ReactElement} Router component\r\n */\r\nexport const ModuleRouter = () => {\r\n    // ========================================================================\r\n    // STATE\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Currently active module\r\n     * \r\n     * JUNIOR DEV NOTE: Why default to 'calendar'?\r\n     * The calendar is the most important view for a family calendar app.\r\n     * Users should see it first when they open the app.\r\n     */\r\n    const [currentModule, setCurrentModule] = useState('calendar');\r\n\r\n    // ========================================================================\r\n    // EFFECTS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Handle escape key to close app (kiosk mode)\r\n     * \r\n     * WHAT IT DOES:\r\n     * Listens for Escape key and closes the window.\r\n     * \r\n     * WHY WE NEED IT:\r\n     * In kiosk mode, there's no window chrome (close button).\r\n     * Escape key provides a way to exit for maintenance.\r\n     * \r\n     * JUNIOR DEV NOTE: Why cleanup function?\r\n     * When the component unmounts, we remove the event listener.\r\n     * This prevents memory leaks.\r\n     */\r\n    useEffect(() => {\r\n        const handleEsc = (event) => {\r\n            if (event.key === 'Escape') {\r\n                window.close();\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleEsc);\r\n\r\n        // Cleanup function\r\n        return () => window.removeEventListener('keydown', handleEsc);\r\n    }, []);\r\n\r\n    // ========================================================================\r\n    // RENDERING\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Renders the current module component\r\n     * \r\n     * WHAT IT DOES:\r\n     * Looks up the component for the current module and renders it.\r\n     * \r\n     * JUNIOR DEV NOTE: Why || CalendarView?\r\n     * If someone passes an invalid module name, we fall back to Calendar.\r\n     * This prevents the app from crashing.\r\n     */\r\n    const ModuleComponent = MODULES[currentModule] || CalendarView;\r\n\r\n    return (\r\n        <>\r\n            <MainLayout\r\n                currentModule={currentModule}\r\n                onModuleSelect={setCurrentModule}\r\n            >\r\n                {/* AnimatePresence enables exit animations */}\r\n                <AnimatePresence mode=\"wait\">\r\n                    {/* \r\n            motion.div animates the module transitions\r\n            \r\n            JUNIOR DEV NOTE: Why key={currentModule}?\r\n            Framer Motion uses the key to detect when the component changes.\r\n            When the key changes, it triggers the exit/enter animations.\r\n          */}\r\n                    <motion.div\r\n                        key={currentModule}\r\n                        initial={TRANSITION_CONFIG.initial}\r\n                        animate={TRANSITION_CONFIG.animate}\r\n                        exit={TRANSITION_CONFIG.exit}\r\n                        transition={TRANSITION_CONFIG.transition}\r\n                        style={{ height: '100%' }}\r\n                    >\r\n                        <ModuleComponent />\r\n                    </motion.div>\r\n                </AnimatePresence>\r\n            </MainLayout>\r\n\r\n            {/* Global notification snackbar */}\r\n            <GlobalSnackbar />\r\n        </>\r\n    );\r\n};\r\n\r\n/**\r\n * REFACTORING NOTE:\r\n * \r\n * Before: All routing logic in App.jsx\r\n * After: Separated into this file\r\n * \r\n * Benefits:\r\n * - App.jsx is now just 10 lines\r\n * - Routing logic is isolated and testable\r\n * - Easy to add new modules\r\n * - Animation config is centralized\r\n */\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\api\\GoogleApiClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\calendarCache.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\googleAuth.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\googleCalendar.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\googlePhotos.js","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'_accessToken' is defined but never used.","line":306,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":306,"endColumn":51,"suggestions":[{"messageId":"removeVar","data":{"varName":"_accessToken"},"fix":{"range":[10628,10641],"text":""},"desc":"Remove unused variable '_accessToken'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'_mediaItemId' is defined but never used.","line":306,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":306,"endColumn":65,"suggestions":[{"messageId":"removeVar","data":{"varName":"_mediaItemId"},"fix":{"range":[10640,10654],"text":""},"desc":"Remove unused variable '_mediaItemId'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @fileoverview Google Photos Picker API service\r\n * @module services/googlePhotos\r\n * \r\n * EDUCATIONAL NOTES FOR JUNIOR DEVELOPERS:\r\n * \r\n * WHY THIS FILE EXISTS:\r\n * Google Photos has a special \"Picker API\" that lets users select photos\r\n * from their library. Unlike other Google APIs, this one requires:\r\n * 1. Creating a \"session\" (temporary workspace)\r\n * 2. Opening the picker UI (Google's photo selector)\r\n * 3. Polling to check when user is done selecting\r\n * 4. Downloading selected photos to our local server\r\n * \r\n * This file handles the entire photo selection and download workflow.\r\n * \r\n * DESIGN PATTERN: Service Layer + Async Workflow Pattern\r\n * We manage a multi-step asynchronous process (session ΓåÆ pick ΓåÆ download).\r\n */\r\n\r\nimport { createGoogleApiClient } from './api/GoogleApiClient';\r\nimport { API_ENDPOINTS } from '../utils/constants';\r\n\r\n// Google Photos Picker API endpoint\r\nconst PICKER_API = 'https://photospicker.googleapis.com/v1';\r\n\r\n/**\r\n * Creates a Google Photos Picker session\r\n * \r\n * WHAT IT DOES:\r\n * Initializes a temporary \"session\" for photo picking.\r\n * \r\n * WHY WE NEED IT:\r\n * The Photos Picker API requires a session ID to track the user's selection.\r\n * Think of it like opening a shopping cart before adding items.\r\n * \r\n * HOW IT WORKS:\r\n * 1. Make POST request to create session\r\n * 2. Google returns a session ID and picker URL\r\n * 3. We use the session ID to poll for results later\r\n * \r\n * @param {string} accessToken - OAuth2 access token\r\n * @returns {Promise<Object>} Session data with ID and picker URL\r\n * \r\n * @example\r\n * const session = await createPickerSession(userToken);\r\n * // Returns: { id: \"session123\", pickerUri: \"https://...\" }\r\n */\r\nexport const createPickerSession = async (accessToken) => {\r\n    const client = createGoogleApiClient(accessToken);\r\n\r\n    try {\r\n        const data = await client.post(`${PICKER_API}/sessions`, {});\r\n        return data;\r\n    } catch (error) {\r\n        console.error('Failed to create picker session:', error);\r\n        throw new Error('Could not start photo picker. Please try again.');\r\n    }\r\n};\r\n\r\n/**\r\n * Polls a picker session to check if user finished selecting\r\n * \r\n * WHAT IT DOES:\r\n * Checks if the user has finished selecting photos in the picker UI.\r\n * \r\n * WHY WE NEED IT:\r\n * The picker opens in a popup/iframe. We need to poll (repeatedly check)\r\n * to know when the user clicks \"Done\" or \"Cancel\".\r\n * \r\n * HOW IT WORKS:\r\n * 1. Make GET request to session endpoint\r\n * 2. Check the session state\r\n * 3. If state is \"PICKED\", user is done\r\n * 4. If state is \"ACTIVE\", user is still selecting\r\n * 5. If state is \"CANCELLED\", user cancelled\r\n * \r\n * JUNIOR DEV NOTE: Why polling instead of callbacks?\r\n * The picker runs in a separate window/iframe. We can't get a direct callback.\r\n * Polling is the standard approach for this API.\r\n * \r\n * @param {string} accessToken - OAuth2 access token\r\n * @param {string} sessionId - Session ID from createPickerSession\r\n * @returns {Promise<Object>} Session status\r\n * \r\n * @example\r\n * const status = await pollPickerSession(userToken, sessionId);\r\n * if (status.pickerState === 'PICKED') {\r\n *   // User finished selecting!\r\n * }\r\n */\r\nexport const pollPickerSession = async (accessToken, sessionId) => {\r\n    const client = createGoogleApiClient(accessToken);\r\n\r\n    try {\r\n        const data = await client.get(`${PICKER_API}/sessions/${sessionId}`);\r\n        return data;\r\n    } catch (error) {\r\n        console.error('Failed to poll picker session:', error);\r\n        throw new Error('Could not check picker status.');\r\n    }\r\n};\r\n\r\n/**\r\n * Gets selected media items and downloads them to local disk\r\n * \r\n * WHAT IT DOES:\r\n * After user selects photos, this function:\r\n * 1. Fetches the list of selected items from Google\r\n * 2. Downloads each photo/video to our local server\r\n * 3. Returns metadata about the downloaded files\r\n * \r\n * WHY WE NEED IT:\r\n * Google Photos URLs expire after a few hours. We need to download\r\n * the actual files to our server for permanent storage.\r\n * \r\n * HOW IT WORKS:\r\n * 1. Get list of selected media items from session\r\n * 2. For each item:\r\n *    a. Build download URL (with size parameters)\r\n *    b. Send to our backend to download\r\n *    c. For videos, also download a thumbnail image\r\n * 3. Return array of downloaded file metadata\r\n * \r\n * JUNIOR DEV NOTE: Why download to backend instead of directly?\r\n * - CORS: Google's servers don't allow direct browser downloads\r\n * - Storage: Files need to be saved to disk, which browsers can't do\r\n * - Processing: Backend can resize, optimize, etc.\r\n * \r\n * @param {string} accessToken - OAuth2 access token\r\n * @param {string} sessionId - Session ID\r\n * @param {number} ownerId - User ID who owns these photos\r\n * @returns {Promise<Array>} Array of downloaded media items\r\n * \r\n * @example\r\n * const items = await getPickedMediaItems(token, sessionId, userId);\r\n * // Returns: [{ id, type, url, thumbnail, mimeType, filename }, ...]\r\n */\r\nexport const getPickedMediaItems = async (accessToken, sessionId, ownerId) => {\r\n    const client = createGoogleApiClient(accessToken);\r\n\r\n    // Fetch selected media items\r\n    let items;\r\n    try {\r\n        const data = await client.get(`${PICKER_API}/mediaItems`, { sessionId });\r\n        items = data.mediaItems || [];\r\n    } catch (error) {\r\n        console.error('Failed to fetch picked media items:', error);\r\n        throw new Error('Could not retrieve selected photos.');\r\n    }\r\n\r\n    // Download each item to local storage\r\n    const processedItems = await Promise.all(items.map(async (item) => {\r\n        try {\r\n            return await downloadMediaItem(item, accessToken, ownerId);\r\n        } catch (error) {\r\n            console.error(`Failed to download item ${item.id}:`, error);\r\n            return null; // Skip failed downloads\r\n        }\r\n    }));\r\n\r\n    // Filter out failed downloads\r\n    return processedItems.filter(Boolean);\r\n};\r\n\r\n/**\r\n * Downloads a single media item to local storage\r\n * \r\n * WHAT IT DOES:\r\n * Downloads a photo or video from Google Photos to our local server.\r\n * \r\n * HOW IT WORKS:\r\n * 1. Extract base URL from Google Photos item\r\n * 2. Add size/quality parameters to URL\r\n * 3. Send download request to our backend\r\n * 4. For videos, also download a thumbnail\r\n * 5. Return metadata about the downloaded file\r\n * \r\n * JUNIOR DEV NOTE: What are those =w1920-h1080 parameters?\r\n * Google Photos lets you request specific sizes by adding parameters:\r\n * - =w1920-h1080: Photo at 1920x1080 resolution\r\n * - =dv: Video download\r\n * - =w400-h400: Small thumbnail\r\n * \r\n * @param {Object} item - Media item from Google Photos API\r\n * @param {string} accessToken - OAuth2 access token\r\n * @param {number} ownerId - User ID\r\n * @returns {Promise<Object>} Downloaded item metadata\r\n * @private\r\n */\r\nconst downloadMediaItem = async (item, accessToken, ownerId) => {\r\n    // Extract and normalize base URL\r\n    let baseUrl = item.mediaFile?.baseUrl || '';\r\n    if (baseUrl && !baseUrl.startsWith('http')) {\r\n        baseUrl = `https://lh3.googleusercontent.com/${baseUrl}`;\r\n    }\r\n\r\n    // Determine file type\r\n    const mimeType = item.mediaFile?.mimeType || 'image/jpeg';\r\n    const isVideo = mimeType.startsWith('video/');\r\n\r\n    // Build filename\r\n    const ext = isVideo ? 'mp4' : 'jpg';\r\n    const filename = `${item.id}.${ext}`;\r\n\r\n    // Build download URL with size parameters\r\n    const downloadUrl = isVideo\r\n        ? `${baseUrl}=dv` // Video download\r\n        : `${baseUrl}=w1920-h1080`; // High-res photo\r\n\r\n    // Download main file via backend\r\n    const downloadRes = await fetch('/api/download', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n            url: downloadUrl,\r\n            filename: filename,\r\n            ownerId: ownerId,\r\n            mimeType: mimeType,\r\n            accessToken: accessToken,\r\n        }),\r\n    });\r\n\r\n    if (!downloadRes.ok) {\r\n        throw new Error(`Download failed: ${await downloadRes.text()}`);\r\n    }\r\n\r\n    const result = await downloadRes.json();\r\n    let thumbnail = result.url; // For photos, thumbnail is same as main\r\n\r\n    // For videos, download separate thumbnail\r\n    if (isVideo) {\r\n        thumbnail = await downloadVideoThumbnail(item.id, baseUrl, accessToken, ownerId);\r\n    }\r\n\r\n    return {\r\n        id: item.id,\r\n        type: isVideo ? 'video' : 'photo',\r\n        url: result.url,\r\n        thumbnail: thumbnail,\r\n        mimeType: mimeType,\r\n        filename: filename,\r\n        baseUrl: baseUrl,\r\n    };\r\n};\r\n\r\n/**\r\n * Downloads a thumbnail image for a video\r\n * \r\n * WHAT IT DOES:\r\n * Videos need a separate thumbnail image for display in galleries.\r\n * \r\n * @param {string} itemId - Media item ID\r\n * @param {string} baseUrl - Base Google Photos URL\r\n * @param {string} accessToken - OAuth2 access token\r\n * @param {number} ownerId - User ID\r\n * @returns {Promise<string>} Thumbnail URL or fallback to main URL\r\n * @private\r\n */\r\nconst downloadVideoThumbnail = async (itemId, baseUrl, accessToken, ownerId) => {\r\n    const thumbFilename = `${itemId}_thumb.jpg`;\r\n    const thumbUrl = `${baseUrl}=w400-h400`; // Small thumbnail\r\n\r\n    try {\r\n        const thumbRes = await fetch('/api/download', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                url: thumbUrl,\r\n                filename: thumbFilename,\r\n                ownerId: ownerId,\r\n                mimeType: 'image/jpeg',\r\n                accessToken: accessToken,\r\n            }),\r\n        });\r\n\r\n        if (thumbRes.ok) {\r\n            const thumbResult = await thumbRes.json();\r\n            return thumbResult.url;\r\n        }\r\n    } catch (error) {\r\n        console.warn(`Failed to download thumbnail for ${itemId}:`, error);\r\n    }\r\n\r\n    // Fallback to main URL if thumbnail download fails\r\n    return `${baseUrl}=w400-h400`;\r\n};\r\n\r\n/**\r\n * Refreshes an expired video URL\r\n * \r\n * WHAT IT DOES:\r\n * With local disk storage, this is no longer needed.\r\n * Kept for backwards compatibility.\r\n * \r\n * JUNIOR DEV NOTE: Why is this here if it's not used?\r\n * In the old implementation, we streamed videos directly from Google.\r\n * Those URLs expired, so we needed to refresh them.\r\n * Now we download videos to disk, so URLs don't expire.\r\n * \r\n * @param {string} accessToken - OAuth2 access token\r\n * @param {string} mediaItemId - Media item ID\r\n * @returns {Promise<null>} Always returns null\r\n * @deprecated Use local disk storage instead\r\n */\r\nexport const refreshVideoUrl = async (_accessToken, _mediaItemId) => {\r\n    // Not needed with disk storage\r\n    return null;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\googleProfile.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\googleTasks.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\transformers\\calendarTransformer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\services\\utils\\tokenManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\theme\\ThemeContext.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\theme\\ThemeContextCore.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\theme\\theme.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\theme\\useTheme.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\utils\\constants.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\utils\\date.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\utils\\platform.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\utils\\storage.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\coffm\\Coffman Calendar\\app\\src\\utils\\validation.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
